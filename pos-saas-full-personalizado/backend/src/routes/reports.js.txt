export async function handleReports(request, env) {
  const url = new URL(request.url);
  const path = url.pathname;

  if (request.method === 'GET' && path === '/api/reports/sales') {
    const results = await env.DB.prepare(`
      SELECT s.id, s.total, s.date, u.email as user_email
      FROM sales s
      JOIN users u ON s.user_id = u.id
    `).all();

    return new Response(JSON.stringify(results), {
      headers: { 'Content-Type': 'application/json' },
    });
  }

  return new Response('Ruta no encontrada', { status: 404 });
}